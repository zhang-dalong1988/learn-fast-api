# First Steps

## Install FastAPI

First of all, you will need Python 3.8+.

You can install FastAPI with:

```bash
pip install "fastapi[standard]"
```

This command installs FastAPI along with all the standard dependencies, including `uvicorn` which you can use as the server.

## Your First API

Create a file named `main.py` with:

```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def root():
    return {"message": "Hello World"}
```

Or use `def` instead of `async def`:

```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/")
def root():
    return {"message": "Hello World"}
```

## Run It

Run the server with:

```bash
uvicorn main:app --reload
```

About the command `uvicorn main:app --reload`:

- `main`: the file `main.py` (the Python "module").
- `app`: the object created inside of `main.py` with the line `app = FastAPI()`.
- `--reload`: enable hot reloading. The server will restart automatically when you make changes to the code.

## Check It

Open your browser at http://127.0.0.1:8000.

You will see the JSON response as:

```json
{"message": "Hello World"}
```

## Interactive API Docs

Now go to http://127.0.0.1:8000/docs.

You will see the automatic interactive API documentation (provided by **Swagger UI**).

## Alternative API Docs

Now, go to http://127.0.0.1:8000/redoc.

You will see the alternative automatic documentation (provided by **ReDoc**).

## OpenAPI

FastAPI generates a "schema" with all your API using the **OpenAPI** standard for defining APIs.

#### "Schema"

A "schema" is a definition or description of something. Not the code that implements it, but just an abstract description.

#### API "Schema"

OpenAPI is a specification that dictates how to define the schema of your API.

The schema defines your API paths, the parameters they take, etc.

#### `openapi.json`

The raw OpenAPI schema is the actual JSON that describes your API. It is automatically generated by FastAPI.

You can see the raw OpenAPI schema at: http://127.0.0.1:8000/openapi.json.

It will show something like:

```json
{
    "openapi": "3.1.0",
    "info": {
        "title": "FastAPI",
        "version": "0.1.0"
    },
    "paths": {
        "/": {
            "get": {
                "summary": "Root",
                "operationId": "root__get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HelloWorld"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "HelloWorld": {
                "title": "HelloWorld",
                "required": [
                    "message"
                ],
                "properties": {
                    "message": {
                        "title": "Message",
                        "type": "string"
                    }
                },
                "type": "object"
            }
        }
    }
}
```

#### What Can You Do With the Schema?

The schema is the source of truth for your API.

And it is automatically generated by FastAPI.

And it is used by the automatic interactive documentation systems.

And it is used by many alternative tools, like:
- Automatic client code generators for frontend and mobile
- Validation tools
- And many others

## Step 1: Import FastAPI

```python
from fastapi import FastAPI
```

`FastAPI` is a Python class that provides all the functionality for your API.

## Step 2: Create a FastAPI "Instance"

```python
app = FastAPI()
```

This is the object that will be the main point of interaction for your application.

It is called `app` by convention, but you can name it whatever you want.

## Step 3: Create a Path Operation

#### Path

A "path" here refers to the last part of a URL starting from the first `/`.

So, in a URL like:
`https://example.com/users/login`

the path would be:
`/users/login`

#### Operation

"Operation" here refers to one of the HTTP "methods".

One of:
- `POST`
- `GET`
- `PUT`
- `DELETE`
- ...and the more exotic ones:
    - `OPTIONS`
    - `HEAD`
    - `PATCH`
    - `TRACE`

In OpenAPI, each of these is called an "operation".

We will call them "**path operation**" or just "**operation**".

#### Define a Path Operation Decorator

```python
@app.get("/")
def root():
    ...
```

The `@app.get("/")` tells FastAPI that the function right below is in charge of handling requests that go to:

- the path `/`
- using the **get** <http://method>

#### Path Operation Function

```python
def root():
    ...
```

- This is our "path operation function".
    - `def` is the keyword used in Python to declare a function.
    - `root` is the function name.
    - You can use any name you want.
    - The function arguments go inside the parenthesis.
    - Then a colon `:` ends the declaration.
    - This function will be called by FastAPI whenever it receives a request to the URL `"/"` using a `GET` operation.

## Step 4: Return the Content

```python
    return {"message": "Hello World"}
```

- You can return a `dict`, `list`, singular values as `str`, `int`, etc.
- You can also return Pydantic models.
- There are many other objects and models that will be automatically converted to JSON.
- FastAPI will automatically convert this return value to JSON using `json.dumps()` compatible with the standard Python `json` library.

## Recap, Step by Step

### Step 1: Import FastAPI

```python
from fastapi import FastAPI
```

### Step 2: Create a FastAPI Instance

```python
app = FastAPI()
```

### Step 3: Create a Path Operation

```python
@app.get("/")
def root():
    ...
```

### Step 4: Return the Content

```python
    return {"message": "Hello World"}
```

### Step 5: Run the Server

```bash
uvicorn main:app --reload
```

## Upgrade The Example

Modify the file `main.py` to receive a body from a `PUT` request.

Declare the body using Pydantic models.

```python
from typing import Union
from fastapi import FastAPI
from pydantic import BaseModel


class Item(BaseModel):
    name: str
    description: Union[str, None] = None
    price: float
    tax: Union[float, None] = None


app = FastAPI()


@app.post("/")
def create_item(item: Item):
    return item
```

The server should auto-reload (because you added `--reload` to the `uvicorn` command).

## The Interactive API Docs Upgrade

Now go to http://127.0.0.1:8000/docs.

The interactive API documentation will be updated automatically, including the new body:

Click on the "Try it out" button, it allows you to fill the parameters and interact with the API directly.

## That's It All Folks (For Now)

You already saw the basic workflow.

In the next tutorials, you will see how to:

- Use **parameters** (path, query, body, etc).
- Use **data validation**.
- Declare **security** and authentication.
- And more...
