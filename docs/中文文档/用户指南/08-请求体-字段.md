# 请求体 - 字段

## 1. 使用 Pydantic 的 `Field`

使用 Pydantic 的 `Field` 为请求体属性声明额外的验证和元数据。

```python
# 导入必要的类
from fastapi import Body, FastAPI
# 从 pydantic 导入 BaseModel 和 Field
from pydantic import BaseModel, Field

# 创建应用实例
app = FastAPI()


# 定义 Item 数据模型, 使用 Field 添加验证
class Item(BaseModel):
    name: str  # 名称字段, 必填
    # 描述字段, 可选, 使用 Field 添加验证和元数据
    description: str | None = Field(
        None,  # 默认值为 None
        title="The description of the item",  # 字段标题
        max_length=300  # 最大长度限制
    )
    # 价格字段, 必填, 使用 Field 添加验证
    price: float = Field(
        ...,  # 必填字段
        gt=0,  # 必须大于 0
        description="The price must be greater than zero"  # 字段描述
    )
    # 税费字段, 可选, 使用 Field 添加验证
    tax: float | None = Field(
        None,  # 默认值为 None
        ge=0,  # 必须大于等于 0
        description="Tax percentage (0-100)"  # 字段描述
    )


# 定义 PUT 路径操作
@app.put("/items/{item_id}")
async def update_item(
    item_id: int,
    # item 是请求体, 使用 embed=True 嵌入
    item: Item = Body(..., embed=True)
):
    # 返回包含 item_id 和 item 的结果
    return {"item_id": item_id, "item": item}
```

## 2. Field vs Query, Path, Body

`Field` 的工作方式类似于 `Query`, `Path` 和 `Body`, 但它专门用于 Pydantic 模型字段。

所有可以传递给 `Field` 的参数也可以传递给 `Query`, `Path` 和 `Body`。

但是 `Query`, `Path` 和 `Body` 专门用于 FastAPI 参数 (路径, 查询, 请求体)。

而 `Field` 专门用于 Pydantic 模型字段。

## 3. 总结

使用 `Field` 你可以:

* 为请求体属性声明额外的验证和元数据
* 使用与 `Query`, `Path` 和 `Body` 相同的参数

以及更多!
